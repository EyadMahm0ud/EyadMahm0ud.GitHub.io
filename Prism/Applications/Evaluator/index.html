<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluator</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        #TerminalOutput {
            flex-grow: 1;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            padding-right: 10px;
        }

        #InputContainer {
            display: flex;
            align-items: center;
            padding-top: 5px;
        }

        #Prompt {
            color: #fff;
            margin-right: 5px;
        }

        #TerminalInput {
            background: transparent;
            color: #fff;
            border: none;
            outline: none;
            flex-grow: 1;
            font-family: inherit;
        }
    </style>
</head>
<body>

    <pre id="TerminalOutput"></pre>

    <div id="InputContainer">
        <span id="Prompt"></span>
        <input type="text" id="TerminalInput" autofocus>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const outputElement = document.getElementById('TerminalOutput');
            const inputElement = document.getElementById('TerminalInput');
            const promptElement = document.getElementById('Prompt');
            const urlParams = new URLSearchParams(window.location.search);
            const userName = urlParams.get('User') || 'Administrator';
            const initialMessage = `
Prism Concept [Version 1.0.0]
(C) Prism Corporation. All rights reserved.
`;
            const currentPrompt = `P:/Users/${userName}>`;

            function appendLine(text) {
                outputElement.textContent += text + '\n';
                outputElement.scrollTop = outputElement.scrollHeight;
            }
            
            function clearTerminal() {
                outputElement.textContent = initialMessage;
            }

            async function processCommand(command) {
                appendLine(currentPrompt + ' ' + command);

                const commandTrimmed = command.trim();
                const commandParts = commandTrimmed.split(' ');
                const mainCommand = commandParts[0].toLowerCase();
                
                if (mainCommand === 'help') {
                    const helpMessage = `
Available commands:
  help      - Shows this help message.
  clear     - Clears the terminal screen.
Any other input is evaluated as a JavaScript expression.
Examples:
  - 1 + 2
  - new Date()
  - 'Hello World'.toUpperCase()
`;
                    appendLine(helpMessage);
                } else if (mainCommand === 'clear') {
                    clearTerminal();
                } else {
                    try {
                        // eslint-disable-next-line no-eval
                        const result = eval(commandTrimmed);
                        appendLine(result);
                    } catch (error) {
                        appendLine(`Error: ${error.message}`);
                    }
                }
                
                promptElement.textContent = currentPrompt;
            }

            appendLine(initialMessage);
            promptElement.textContent = currentPrompt;
            inputElement.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    const command = inputElement.value;
                    inputElement.value = '';
                    processCommand(command);
                }
            });
            
            inputElement.focus();
        });
    </script>
</body>
</html>
